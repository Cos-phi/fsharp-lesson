---
title: "第三回 トリグラムのインデクサ、ToyIndを作ろう"
layout: page
---

大規模な全文検索のためのインデクサだけれど仕様が簡単になるようにいろいろ制約はある、ToyIndを作ろう。

## 全文検索入門

全文検索システムとは、大量のファイルがあって、その中から特定の文字を高速で探すソフトウェアの事です。

## 基本的な前提と仕様

`[a-z], [A-Z], [0-9]` のトリグラムをインデックスにする。

一つのファイルはそこまで大きく無いがファイル数は大量にある。だいたい英語だが英語以外も混ざっている。

## 構成

- ファイル名からidへのマップ、及びidからファイル名へのマップ
- トリグラムからid delta listへのマップ

### 検索の手順

- トリグラムからファイルidを取り出す
- ファイルidからファイルパスを取り出す
- ファイルを開いて検索

## ファイル名からidへのマップを作る

とりあえず各行にパスが書いてあるテキストファイルを作り、オンメモリに一度読み込む。

## トリグラムのインデックスを作る

トリグラムをパスにしたindex.datみたいなファイルを作る。
まずは一行一idで。

## いくつかの規模で検索してみる

とりあえず全検索、インデクサ使った検索を比較していき、
またサイズを増やしてインデックスのサイズやその探索時間がどうなっていくかを調べる。